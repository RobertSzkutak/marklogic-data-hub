<!doctype html> <!--[if lt IE 7 ]><html itemscope itemtype="http://schema.org/Organization" id="ie6" class="ie ie-old" lang="en-US"><![endif]--><!--[if IE 7 ]><html itemscope itemtype="http://schema.org/Organization" id="ie7" class="ie ie-old" lang="en-US"><![endif]--><!--[if IE 8 ]><html itemscope itemtype="http://schema.org/Organization" id="ie8" class="ie ie-old" lang="en-US"><![endif]--><!--[if IE 9 ]><html itemscope itemtype="http://schema.org/Organization" id="ie9" class="ie" lang="en-US"><![endif]--><!--[if gt IE 9]><!--><html itemscope itemtype="http://schema.org/Organization" lang="en-US"><!--<![endif]--><head><meta charset="utf-8"><title>Getting Started Tutorial 2.x<br>Modeling the Order Entity - MarkLogic Data Hub Framework</title><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><meta content="yes" name="apple-mobile-web-app-capable"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="shortcut icon" sizes="16x16 24x24 32x32 48x48 64x64 96x96" href="/marklogic-data-hub/favicon.ico"><link rel="apple-touch-icon" sizes="57x57" href="/marklogic-data-hub/img/favicons/favicon-57.png"><link rel="apple-touch-icon-precomposed" sizes="57x57" href="/marklogic-data-hub/img/favicons/favicon-57.png"><link rel="apple-touch-icon" sizes="60x60" href="/marklogic-data-hub/img/favicons/favicon-60.png"><link rel="apple-touch-icon" sizes="72x72" href="/marklogic-data-hub/img/favicons/favicon-72.png"><link rel="apple-touch-icon" sizes="76x76" href="/marklogic-data-hub/img/favicons/favicon-76.png"><link rel="apple-touch-icon" sizes="96x96" href="/marklogic-data-hub/img/favicons/favicon-96.png"><link rel="apple-touch-icon" sizes="114x114" href="/marklogic-data-hub/img/favicons/favicon-114.png"><link rel="apple-touch-icon" sizes="120x120" href="/marklogic-data-hub/img/favicons/favicon-120.png"><link rel="apple-touch-icon" sizes="144x144" href="/marklogic-data-hub/img/favicons/favicon-144.png"><link rel="apple-touch-icon" sizes="152x152" href="/marklogic-data-hub/img/favicons/favicon-152.png"><link rel="apple-touch-icon" sizes="180x180" href="/marklogic-data-hub/img/favicons/favicon-180.png"><link rel="apple-touch-icon" sizes="192x192" href="/marklogic-data-hub/img/favicons/favicon-192.png"><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous"><meta name="application-name" content="MarkLogic Data Hub Framework - A data hub framework for MarkLogic"><meta name="msapplication-TileImage" content="/marklogic-data-hub/img/favicons/favicon-144.png"><meta name="msapplication-TileColor" content="#ffffff"> <script>!function(e,t,a,n,c,s,o){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,s=t.createElement(a),o=t.getElementsByTagName(a)[0],s.async=1,s.src=n,o.parentNode.insertBefore(s,o)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-6638631-15","auto"),ga("send","pageview")</script> <script>!function(e,t,n,a,c,o,s){e.fbq||(c=e.fbq=function(){c.callMethod?c.callMethod.apply(c,arguments):c.queue.push(arguments)},e._fbq||(e._fbq=c),c.push=c,c.loaded=!0,c.version="2.0",c.queue=[],o=t.createElement(n),o.async=!0,o.src=a,s=t.getElementsByTagName(n)[0],s.parentNode.insertBefore(o,s))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),fbq("init","1879746318909687"),fbq("track","PageView")</script><noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=1879746318909687&ev=PageView&noscript=1"/></noscript></head><body class=""><nav class="navbar navbar-inverse navbar-fixed-top"><div class="container-fluid"><div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/marklogic-data-hub/"> <span class="logo"> <img src="/marklogic-data-hub/images/logo-marklogic.svg" width="150px" height="36px" alt="MarkLogic" title="MarkLogic" scale="0"> </span> MarkLogic Data Hub Framework </a></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li> <a href="/marklogic-data-hub/">Getting Started</a></li><li> <a href="/marklogic-data-hub/what">What?</a></li><li> <a href="/marklogic-data-hub/how">How?</a></li><li> <a href="https://github.com/marklogic-community/marklogic-data-hub">Fork on GitHub</a></li></ul></div></div> </nav><div class="title-group"><h1 class="special"> <span> Getting Started Tutorial 2.x<br>Modeling the Order Entity </span></h1><p class="lead"></p></div><article><div class="container"><div class="row"><div class="col-md-10 col-md-offset-1"><p>In real life we would browse the loaded data to try and better understand it. Let’s skip ahead and pretend that we have spoken to our Data Guru again.</p><p>The Order data we loaded is different than the Product data. Each order can have more than one Product. And for each product there can be a variable quantity.</p><p>Let’s look at order 1.</p><pre><code class="language-csv">id,customer,order_date,ship_date,product_id,sku,price,quantity,discounted_price,title,description
1,600,04/20/2017,05/02/2017,1000055,101591922267,4.5,1.0,3.92,different gallon,
1,600,04/20/2017,05/02/2017,1000153,164451986229,4.5,1.0,3.92,unwilling eave,
1,600,04/20/2017,05/02/2017,1000066,118675935929,33.99,2.0,32.53,stingy sharon,
</code></pre><p>We can see that there are three products in this order. We want to refer to them by sku: 101591922267, 164451986229, and 118675935929. Note that 118675935929 has a quantity of 2.0. Our data guru wants us to compute the total price for each order. To compute the price for this order we need to do some math.</p><div class="highlighter-rouge"><pre class="highlight"><code>(4.5 * 1) +
(4.5 * 1) +
(33.99 * 2)
-----------
$76.98
</code></pre></div><p>We know that we want to harmonize three fields: <strong>id</strong>, <strong>price</strong>, and <strong>products</strong>. id is the unique identifier for each order. Price will be the total price of the entire order. Products will be an array of pointers to the Product entities in our Final database.</p><p>Let’s start modeling our Entity. <i class="fa fa-hand-pointer-o"></i> Click on the <strong>Entities</strong> tab in the top navigation bar.</p><p><img src="/marklogic-data-hub/images/2x/click-entities-3.png" alt="Click Entities Tab"/></p><ol><li><i class="fa fa-hand-pointer-o"></i> Click on the <strong>pencil</strong> icon <i class="fa fa-pencil"></i> for the <strong>Order</strong> entity.</li><li><i class="fa fa-hand-pointer-o"></i> Click the <strong class="circle-button">+</strong> button below <strong>Properties</strong> to add a new row.</li><li><i class="fa fa-hand-pointer-o"></i> Click in the area just below the <strong>key</strong> icon to make this row the primary key.</li><li>Type in <strong>id</strong> as the Name.</li><li>Change the Type to <strong>string</strong>.</li></ol><p><img src="/marklogic-data-hub/images/2x/edit-order-entity.png" alt="Edit Entity"/></p><ol><li><i class="fa fa-hand-pointer-o"></i> Click the <strong class="circle-button">+</strong> button below <strong>Properties</strong> to add a new row.</li><li>Type in <strong>price</strong> as the Name.</li><li>Change the Type to <strong>decimal</strong>.</li></ol><p><img src="/marklogic-data-hub/images/2x/edit-order-entity2.png" alt="Edit Entity"/></p><ol><li><i class="fa fa-hand-pointer-o"></i> Click the <strong class="circle-button">+</strong> button below <strong>Properties</strong> to add a new row.</li><li>Type in <strong>products</strong> as the Name.</li><li>Change the Type to <strong>Product</strong>.</li><li>Change the cardinality to 1..∞</li><li><i class="fa fa-hand-pointer-o"></i> Click the <strong class="blue-button">SAVE</strong> button.</li></ol><p><img src="/marklogic-data-hub/images/2x/edit-order-entity3.png" alt="Edit Entity"/></p><p>After clicking <strong>Save</strong> you will be prompted whether you want to Update Indexes in MarkLogic or not.</p><p><i class="fa fa-hand-pointer-o"></i> Click <strong>YES</strong>.</p><p>One of the benefits of modeling your data with Entity Services is that we can use the model to create database configuration options automatically. This means we can update the necessary index settings bases on how you model your data. For the Product entity, we made sku the primary key. The Data Hub Framework will create a range index on the sku element.</p><p><img src="/marklogic-data-hub/images/2x/update-indexes2.png" alt="Update Indexes"/></p><h2 id="up-next">Up Next</h2><p><a href="/marklogic-data-hub/getting-started-2x/harmonizing-order-data">Harmonizing the Order Data</a></p></div></div></div> </article><footer class="site-footer"><div class="container"><div class="row"><div class="col-md-12"><p class="text-muted"> Copyright © 2016-2017 MarkLogic Corporation. All Rights Reserved. MARKLOGIC® is a registered trademark of MarkLogic Corporation.</p></div></div></div> </footer><link rel="stylesheet" href="/marklogic-data-hub/css/style.css"> <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script><script src="/marklogic-data-hub/js/respond.min.js"></script><![endif]--><script src="/marklogic-data-hub/assets/bundle.js" id="1"></script><script>!function(e,t,a,n,c,s,o){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,s=t.createElement(a),o=t.getElementsByTagName(a)[0],s.async=1,s.src=n,o.parentNode.insertBefore(s,o)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-79716597-1","auto"),ga("send","pageview")</script></body></html>